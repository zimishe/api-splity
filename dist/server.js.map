{"version":3,"sources":["../src/server.js"],"names":[],"mappings":"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","file":"server.js","sourcesContent":["import express from 'express'\r\nimport bodyParser from 'body-parser'\r\nimport DB_URL from './config'\r\n\r\nimport { getUsers } from './actions/getUsers'\r\nimport { checkRegisterFields } from './actions/validation/checkRegisterFields'\r\nimport { checkLoginFields } from './actions/validation/checkLoginFields'\r\nimport { addDonation } from './actions/addDonation'\r\nimport { updateTotalAmount } from './actions/updateTotalAmount'\r\n\r\nimport { handleRender } from './intialLoad/actions/handleRender'\r\n\r\nconst app = express();\r\nconst PORT = process.env.PORT || 3001;\r\n\r\nconst MongoClient = require('mongodb').MongoClient;\r\n\r\n// arrow functions\r\nconst server = app.listen(PORT, () => {\r\n  console.log(`app listening at http://localhost:${PORT}`);\r\n});\r\n\r\napp.use(bodyParser.urlencoded({extended: true}));\r\napp.use(bodyParser.json());\r\n\r\napp.use((req, res, next) => {\r\n    res.setHeader('Access-Control-Allow-Origin', '*');\r\n    res.setHeader('Access-Control-Allow-Methods', 'GET,PUT,POST,post,DELETE');\r\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\r\n    next();\r\n});\r\n\r\n\r\napp.get('/', (req, res) => {\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        if (err) {\r\n            return console.log('err', err);\r\n        }\r\n        \r\n        getUsers(req, db, res);\r\n    });\r\n});\r\n\r\napp.get('/getInitialData', (req, res) => {\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        if (err) {\r\n            return console.log('err', err);\r\n        }\r\n        \r\n        getUsers(db, res);\r\n    });\r\n});\r\n\r\napp.post('/addevent', (req, res) => {\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n       db.collection('events').insertOne(req.body, function(err,docsInserted){\r\n            res.send(docsInserted.insertedId)\r\n       });\r\n    });\r\n});\r\n\r\napp.put('/updateEvent', (req, res) => {\r\n    let data = req.body;\r\n    \r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        updateTotalAmount(data, db, res);\r\n    });\r\n});\r\n\r\n\r\napp.post('/register', (req, res) => {\r\n    let data = req.body;\r\n\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        checkRegisterFields(db, data, res);\r\n    });\r\n});\r\n\r\napp.post('/login', (req, res) => {\r\n    let data = req.body;\r\n\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        checkLoginFields(db, data, res);\r\n    });\r\n});\r\n\r\napp.post('/donate', (req, res) => {\r\n    let data = req.body;\r\n\r\n    MongoClient.connect(DB_URL, (err, db) => {\r\n        addDonation(db, data, res);\r\n    });\r\n});\r\n"]}