{"version":3,"sources":["../src/server.js"],"names":[],"mappings":"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","file":"server.js","sourcesContent":["import express from 'express'\nimport bodyParser from 'body-parser'\nimport DB_URL from './config'\n\nimport { getUsers } from './actions/getUsers'\nimport { checkRegisterFields } from './actions/validation/checkRegisterFields'\nimport { checkLoginFields } from './actions/validation/checkLoginFields'\nimport { addDonation } from './actions/addDonation'\n\nconst app = express();\nconst PORT = process.env.PORT || 3001;\n\nconst MongoClient = require('mongodb').MongoClient;\n\n// arrow functions\nconst server = app.listen(PORT, () => {\n  console.log(`app listening at http://localhost:${PORT}`);\n});\n\napp.use(bodyParser.urlencoded({extended: true}));\napp.use(bodyParser.json());\n\napp.use((req, res, next) => {\n    res.setHeader('Access-Control-Allow-Origin', '*');\n    res.setHeader('Access-Control-Allow-Methods', 'GET,PUT,POST,post,DELETE');\n    res.setHeader('Access-Control-Allow-Headers', 'Content-Type');\n    next();\n});\n\n\napp.get('/getInitialData', (req, res) => {\n    MongoClient.connect(DB_URL, (err, db) => {\n        if (err) {\n            return console.log('err', err);\n        }\n        \n        getUsers(db, res);\n    });\n});\n\napp.post('/addevent', (req, res) => {\n    MongoClient.connect(DB_URL, (err, db) => {\n       db.collection('events').insertOne(req.body, function(err,docsInserted){\n            res.send(docsInserted.insertedId)\n       });\n    });\n});\n\n\napp.post('/register', (req, res) => {\n    let data = req.body;\n\n    MongoClient.connect(DB_URL, (err, db) => {\n        checkRegisterFields(db, data, res);\n    });\n});\n\napp.post('/login', (req, res) => {\n    let data = req.body;\n\n    MongoClient.connect(DB_URL, (err, db) => {\n        checkLoginFields(db, data, res);\n    });\n});\n\napp.post('/donate', (req, res) => {\n    let data = req.body;\n\n    MongoClient.connect(DB_URL, (err, db) => {\n        addDonation(db, data, res);\n    });\n});\n"]}